{% extends 'menu.html' %}
{% load static %}
{% block content %}
<style>



  table {
  
    border: 1px solid #cacaca;
  border-collapse: collapse;
  text-align: left;
  width: 100%;
  align-items: center;
  font-family: 'Open Sans', sans-serif;
  }
  
  table thead th {
  
  padding: 10px;
  font-size: 12px;
  color: #000;
  font-weight: 600;
  }
  
  table tbody tr td {
  
  display: table-cell;
  font-weight: 400;
  padding: 10px;
  text-align: left;
  position: relative;
  }

  
  
  table tbody tr {
  
  border: 1px solid #cacaca;
  display: table-row;
  }
  
  table tbody tr:nth-child(odd) {
  
  background: #dddddd4a;
  }
  
  table tbody tr td button {
  
  display: inline-block;
  padding: 10px 15px;
  position: initial;
  transform: translate(0);
  width: auto;
  }
  
  table tbody tr td button {
  
  background: #4CAF50;
  border: none;
  border-radius: 20px;
  box-shadow: 0 4px 8px rgba(34, 34, 34, 0.2);
  color: #fff;
  font-weight: 700;;
  padding: 10px 0;
  width: 100%;
  }
  
  table thead {
  
  display: table-header-group;
  font-weight: 500;
  }
  
  table tbody tr:hover {
    background-color: #7e7e7e8d; /* Cor de fundo quando o mouse passa por cima */
    cursor: pointer; /* Altera o cursor para indicar que é clicável */
}
  
  table tbody tr td:before {
  
  display: none;
  }
  
  table tbody tr td button:hover, table tbody tr td button:focus {
  
  background: #0C504B;
  color: #ffffff;
  cursor: pointer;
  }
  
  @media all and (max-width: 800px) {
  
  table tbody tr td {
  
      display: block;
      text-align: center;
  }
  
  table tbody tr td:before {
  
      content: attr(data-title);
      position: absolute;
      left: 15px;
      display: block;
      font-weight: 600;
      font-size: 1em;
  }
  
  table {
  
      border: none;
  }
  
  table thead {
  
      display: none;
  }
  
  table tbody tr {
  
      margin-bottom: 10px;
      display: block;
      border: 1px solid #dad6eb;
  }
  
  
  }

  .modal-dialog-full {
    width: 100%;
    max-width: none;
    height: 100%;
    margin: 0;
  }
  
  .modal-content-full {
    height: 100%;
    border: 0;
    border-radius: 0;
  }
  
  .modal-body-full {
    overflow-y: auto;
  }
 

  
  </style>
   <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">

       
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->
<section class="content">
    <div class="container-fluid">
    
      

          
      <div class="card">
        <div class="modal-header">
            <h5 class="modal-title">
              {% if solicitacao.evento_json.titulo_evento %}
                {{solicitacao.evento_json.titulo_evento}}
              {% else %}
              
                {% if solicitacao.evento_json.tipo_formatado == None %}
                  Não Informado
                {% else %}
                  {{solicitacao.evento_json.tipo_formatado}}
                {% endif %}
                  
              {% endif %}
 
</h5>
{% if solicitacao.evento_json.titulo_evento %}
{% if '10' in permissoes.permissao %}
<a onclick="editarSolicitacaoModal('{{solicitacao.id}}')"  id="editar_solicitacao"  style=" width: 20%;" class="btn bg-dark">
                                        
  <i class="fas fa-pencil"></i> <B>Editar Solicitação</B>
</a>
{% endif %}
{% endif %}
          </div>
        <!-- /.card-header -->
        <div class="card">
          {% if messages %}
          {% for message in messages%}
          <div {% if message.tags %} class="{{ message.tags }}"{% endif %} style="text-align: center;" role="alert">
          {{message}}
          </div>
          {% endfor %}
          {% endif  %}
          <!-- /.card-header -->
          
          <div class="card-body">
            <div class="form-group">
              <div class="row">
                <div class="col-lg-4 col-12">

                    <div class="small-box" style="background-color: #ffffff; color: #000000">
                      <div class="inner" style="text-align: center;">
                        <h4>{{ solicitacao.get_projeto_display }}</h4>
                     
                      </div>
                   
                      <div style="background-color: #000000;color: #FFF; cursor: pointer;" class="small-box-footer">PROJETO</div>
                    </div>
                 
                  </div>
            
                  <div class="col-lg-4 col-12">
            
                    <div class="small-box" style="background-color: #ffffff; color: #000000">
                      <div class="inner" style="text-align: center;">
                        <h4>{{ solicitacao.data_solicitacao|date:'d/m/Y' }}</h4>
                      </div>
                   
                      <div style="background-color: #000000;color: #FFF;" class="small-box-footer">DATA DA SOLICITAÇÃO</div>
                    </div>
                 
                  </div>
            
                  <div class="col-lg-4 col-12">
            
                    <div class="small-box" style="background-color: #ffffff; color: #000000">
                      <div class="inner" style="text-align: center;">
                        <h4>{{ solicitacao.criado_por.first_name }}</h4>
                      </div>
                   
                      <div style="background-color: #000000;color: #FFF;" class="small-box-footer">SOLICITANTE</div>
                    </div>
                 
                  </div>

                  <div class="col-12 col-sm-12 col-md-12">
                    <div class="card" style="width: 100%;">
                        <div class="card-header" style="background-color: #fafafa;">
                          <label for="">Informações do Evento</label>
                          
                        </div>
                          
                        <div class="card-body">
                         <div class="row">
                          <div class="col-lg-3 col-12">
                            <div class="form-group">
                                <label>Evento:</label>
                                <div class="input-group">
                                  {% if solicitacao.evento_json.titulo_evento %}
                                    {{solicitacao.evento_json.titulo_evento}}
                                  {% else %}
                                  
                                    {% if solicitacao.evento_json.tipo_formatado == None %}
                                      Não Informado
                                    {% else %}
                                      {{solicitacao.evento_json.tipo_formatado}}
                                    {% endif %}
                                      
                                  {% endif %}
                                  
                              
                                </div>
                                <!-- /.input group -->
                            </div>
                          </div>
            
                          <div class="col-lg-3 col-12">
                            <div class="form-group">
                                <label>Data de Início: </label>
                                <div class="input-group">
                                {% if solicitacao.evento_json.titulo_evento %}
                                  {{solicitacao.evento_json.data_inicio}}
                                {% else %}
                                
                                {% if solicitacao.evento_json.data_inicio_formatada == None%}
                                  Não Informado
                                {% else %}
                                 {{solicitacao.evento_json.data_inicio_formatada}}
                                {% endif %}
                                    
                                {% endif %}

                                 
                                  
                              
                                </div>
                                <!-- /.input group -->
                            </div>
                          </div>
            
                          <div class="col-lg-3 col-12">
                            <div class="form-group">
                                <label>Data Final:</label>
                                <div class="input-group">
                                  {% if solicitacao.evento_json.titulo_evento %}
                                  {{solicitacao.evento_json.data_fim}}
                                {% else %}
                                
                                {% if solicitacao.evento_json.data_fim_formatada == None%}
                                  Não Informado
                                {% else %}
                                  {{solicitacao.evento_json.data_fim_formatada}}
                                {% endif %}
                                    
                                {% endif %}

                                 
                                  
                              
                                </div>
                                <!-- /.input group -->
                            </div>
                          </div>
                          {% if solicitacao.publico_evento %}
                          <div class="col-lg-3 col-4">
                            <div class="form-group">
                                <label>Público do Evento:</label>
                                <div class="input-group">
                                  {{solicitacao.publico_evento}}
                                </div>
                                <!-- /.input group -->
                            </div>
                          </div>
                          {% endif %}


                          {% if solicitacao.evento_json.endereco %}
                          <div class="col-lg-3 col-3">
                            <div class="form-group">
                                <label>Unidade:</label>
                                <div class="input-group">
            
                                  {{escola.nome}}
                    
                                  
                              
                                </div>
                                <!-- /.input group -->
                            </div>
                          </div>

                          <div class="col-lg-9 col-9">
                            <div class="form-group">
                                <label>Endereço:</label>
                                <div class="input-group">
            
                                  {{solicitacao.evento_json.endereco}}
                    
                                  
                              
                                </div>
                                <!-- /.input group -->
                            </div>
                          </div>
                          {% else %}
                          <div class="col-lg-3 col-12">
                            <div class="form-group">
                                <label>Logradouro:</label>
                                <div class="input-group">
                                  {% if solicitacao.evento_json.logradouro == None %}
                                  Não Informado
                                  {% else %}
                                  {{solicitacao.evento_json.logradouro}}
                                  {% endif %}
                                  
                              
                                </div>
                                <!-- /.input group -->
                            </div>
                          </div>
            
                          <div class="col-lg-3 col-12">
                            <div class="form-group">
                                <label>Bairro:</label>
                                <div class="input-group">
                                  {% if solicitacao.evento_json.bairro == None %}
                                  Não Informado
                                  {% else %}
                                  {{solicitacao.evento_json.bairro}}
                                  {% endif %}
                                  
                              
                                </div>
                                <!-- /.input group -->
                            </div>
                          </div>
            
                          <div class="col-lg-3 col-12">
                            <div class="form-group">
                                <label>Complemento:</label>
                                <div class="input-group">
                                 {% if solicitacao.evento_json.complemento == None %}
                                 Não Informado
                                 {% else %}
                                 {{solicitacao.evento_json.complemento}}
                                 {% endif %}
                              
                                </div>
                                <!-- /.input group -->
                            </div>
                          </div>

                          <div class="col-lg-3 col-12">
                            <div class="form-group">
                                <label>Cidade:</label>
                                <div class="input-group">
                                 {% if solicitacao.evento_json.CIDADE == None %}
                                 Não Informado
                                 {% else %}
                                 {{solicitacao.evento_json.cidade}}
                                 {% endif %}
                              
                                </div>
                                <!-- /.input group -->
                            </div>
                          </div>
                          {% endif %}
                      
                          {% if programacao_adicional %}
                          <div class="col-12 col-sm-12 col-md-12">
                            <div class="card" style="width: 100%;">
                                <div class="card-header" style="background-color: #fafafa;">
                                  <label for="">Programação do Evento</label>
                                  
                                </div>
                                  
                                <div class="card-body">
                                 <div class="row">
                                    <table style="margin-top: 10px;">
                                        <thead>
                                          <tr>
                                            <th>Data</th>
                                            <th>Hora</th>
                                            <th>Hora Final</th>
                                            <th>Atividade</th>
                                          </tr>
                                        </thead>
                                        <tbody>
                
                                            {% for programacao in programacao_adicional %}
                                            <tr>
                                                <td>{{programacao.data|date:'d/m/Y'}}</td>
                                                <td>{{programacao.hora}}</td>
                                                <td>{{programacao.hora_final}}</td>
                                                <td>{{programacao.atividade}}</td>
                                            {% endfor %}
                                            </tr>
                                        </tbody>
                                    </table>
                                 </div>
                                </div>
                            </div>
                          </div>
                          {% endif %}
                          <div class="col-12 col-sm-12 col-md-12">
                            <div class="card" style="width: 100%;">
                                <div class="card-header" style="background-color: #fafafa;">
                                  <label for="">Demandas Solicitadas</label>
                                  
                                </div>
                                  
                                <div class="card-body">
                                 <div class="row">
                                  {% for entregavel in entregaveis %}
                                    <div class="col-12 col-sm-12 col-md-12">
                                        <div id="accordion">
                                            <div {% if entregavel.status == "0" or entregavel.status == "2" %} class="card card-warning" {% elif entregavel.status == "1" %} class="card card-dark" {% elif entregavel.status == "3" or entregavel.status == "6" or entregavel.status == "5"  %} class="card card-danger" {% else %} class="card card-success" {% endif %}>
                                                <div class="card-header">
                                                    <h4 class="card-title w-100">
                                                        <a style=" font-size: 20px;" class="d-block w-100" data-toggle="collapse" href="#collapse{{ forloop.counter }}" aria-expanded="true">
                                                           #{{entregavel.id}} {{entregavel.get_tipoentregavel_display}} - <b>{{entregavel.categoria_produto}}</b> - PRAZO ATÉ (<b>{{entregavel.prazo|date:'d/m/Y'}}</b>) - {{entregavel.get_status_display}}
                                                       {% if entregavel.status == '4' %}
                                                       <span style="float: right; font-size: 20px;" class="bi bi-check2-circle"></span>
                                                       {% elif entregavel.status == '3' %}
                                                       <span style="float: right; font-size: 20px;" class="bi bi-arrow-repeat"></span>
                                                       {% elif entregavel.status == '6' %}
                                                       <span style="float: right; font-size: 20px;" class="bi bi-x-circle-fill"></span>
                                                       {% elif entregavel.status == '5' %}
                                                       <span onclick="editarEntregavelModal('{{entregavel.id}}')" style="float: right; font-size: 20px;" class="bi bi-pencil-square"> Editar</span>
                                   
                                                       {% else %}
                                                       <span style="float: right; font-size: 20px;" class="bi bi-hourglass-bottom"></span>
                      
                                                       {% endif %}
                                                      
                                                        </a>
                                                      
                                                     
                                                    </h4>
                                                </div>
                                                <div id="collapse{{ forloop.counter }}" class="collapse" data-parent="#accordion" style="">
                                                    <div class="card-body">
                                               
                                                      <div class="row" style="margin-bottom: 3%;">
                        

                                                       {% if entregavel.status == '2' %}
                                                       <div class="col-lg-3 col-12">
                                                          <button onclick="enviaAprovacao('{{entregavel.id}}',4)" type="button" class="btn btn-block btn-dark"><i class="bi bi-check2-circle"></i> Marcar como Recebido</button>
                                                      </div>
                                                      <div class="col-lg-3 col-12">
                                                          <button onclick="devolveComunicacao('{{entregavel.id}}',4)" type="button" class="btn btn-block btn-dark"><i class="bi bi-arrow-counterclockwise"></i> Devolver p/ Correções</button>
                                                      </div>
                                                       <div class="col-lg-3 col-12">
                                                            <button onclick="modalTarefa('{{entregavel.ultima_tarefa_id.id}}')" type="button" class="btn btn-block btn-dark"><i class="bi bi-eye-fill"></i> Visualizar Entregas</button>
                                                        </div>
                                                        {% endif %}
                                                       
                                                        {% if entregavel.status == '1' %}
                                                        {% if '6' in permissoes.permissao %}
                                                        <div class="col-lg-3 col-12">
                                                            <button onclick="modalTarefas('{{entregavel.id}}','{{ forloop.counter }}')" type="button" class="btn btn-block btn-dark"><i class="bi bi-people-fill"></i> Designar Usuário</button>
                                                        </div>
                                                        {% endif %}

                                                        {% if '8' in permissoes.permissao %}
                                                        <div class="col-lg-3 col-12">
                                                            <button onclick="enviaAprovacao('{{entregavel.id}}',2)" type="button" class="btn btn-block btn-dark"><i class="bi bi-send-plus"></i> Enviar p/ Solicitante</button>
                                                        </div>
                                                        {% endif %}

                                                        {% if '7' in permissoes.permissao %}
                                                        <div class="col-lg-3 col-12">
                                                          <button onclick="revisaoTask('{{entregavel.tarefas_relacionadas.id}}')" type="button" class="btn btn-block btn-dark"><i class="bi bi-card-text"></i> Solicitar Revisão de Tarefa</button>
                                                        </div>
                                                        {% endif %}
                                                        
                                                        {%  elif  entregavel.status == '0' and not entregavel.tarefas_relacionadas or entregavel.status == '4' or entregavel.status == '3' %}
                                                       
                                                        {% if '6' in permissoes.permissao %}
                                                        <div class="col-lg-3 col-12">
                                                            <button onclick="modalTarefas('{{entregavel.id}}','{{ forloop.counter }}')" type="button" class="btn btn-block btn-dark"><i class="bi bi-people-fill"></i> Designar Usuário</button>
                                                        </div>
                                                        {% endif %}
                                                       
                                                        {% if entregavel.status == '0'  and not entregavel.tarefas_relacionadas%}
                                                        {% if '6' in permissoes.permissao %}
                                                        <div class="col-lg-3 col-12">
                                                          <button onclick="negarEntregavel('{{entregavel.id}}',6)" type="button" class="btn btn-block btn-dark"><i class="bi bi-x-circle-fill"></i> Negar Entregável</button>
                                                      </div>
                                                      <div class="col-lg-3 col-12">
                                                        <button onclick="negarEntregavel('{{entregavel.id}}',5)" type="button" class="btn btn-block btn-dark"> <i class="bi bi-arrow-return-left"></i> Devolver Entregável</button>
                                                    </div>
                                                    <div class="col-lg-3 col-12">
                                                      <button onclick="editarEntregavelModal('{{entregavel.id}}')" type="button" class="btn btn-block btn-dark"> <i class="bi bi-pencil-square"></i> Editar Entregável</button>
                                                  </div>
                                                    {% endif %}
                                                        {% endif %}
                                                        {% endif %}

                                                   

                                                      </div>
                                           
                                                  

                                                        <div class="row">
                                                        <div class="col-lg-2 col-12">
                                                          <div class="form-group">
                                                              <label>Tipo do Entregável:</label>
                                                              <div class="input-group">
                                                                {% if entregavel.get_tipoentregavel_display %}
                                                                {{entregavel.get_tipoentregavel_display}}
                                                                {% else %}
                                                                Não Informado
                                                                {% endif %}
                                                                
                                                            
                                                              </div>
                                                              <!-- /.input group -->
                                                          </div>
                                                        </div>
                                                        
                                                        <div class="col-lg-2 col-12">
                                                          <div class="form-group">
                                                              <label>Categoria do Produto:</label>
                                                              <div class="input-group">
                                                                {% if entregavel.tipo_produto != 0 %}
                                                                {{entregavel.get_tipoproduto_display}}
                                                                {% else %}
                                                                Não Informado
                                                                {% endif %}
                                                                
                                                            
                                                              </div>
                                                              <!-- /.input group -->
                                                          </div>
                                                        </div>
                    
                                                        <div class="col-lg-2 col-12">
                                                          <div class="form-group">
                                                              <label>Tipo do Produto:</label>
                                                              <div class="input-group">
                                                                {% if entregavel.categoria_produto %}
                                                                {{entregavel.categoria_produto}}
                                                                {% else %}
                                                                Não Informado
                                                                {% endif %}
                                                                
                                                            
                                                              </div>
                                                              <!-- /.input group -->
                                                          </div>
                                                        </div>
                    
                                                        <div class="col-lg-2 col-12">
                                                          <div class="form-group">
                                                              <label>Data da Solicitação:</label>
                                                              <div class="input-group">
                                                                {% if entregavel.data_solicitacao %}
                                                                {{entregavel.data_solicitacao|date:'d/m/Y'}}
                                                                {% else %}
                                                                Não Informado
                                                                {% endif %}
                                                                
                                                            
                                                              </div>
                                                              <!-- /.input group -->
                                                          </div>
                                                        </div>
                                                        <div class="col-lg-4 col-12">
                                                          <div class="form-group">
                                                              <label>Solicitante:</label>
                                                              <div class="input-group">
                                                                {% if entregavel.criado_por %}
                                                                {{entregavel.criado_por.first_name}}
                                                                {% else %}
                                                                Não Informado
                                                                {% endif %}
                                                                
                                                            
                                                              </div>
                                                              <!-- /.input group -->
                                                          </div>
                                                        </div>
                    
                                                     
                    
                                                       
                                                        {% if entregavel.descricao_audio_visual %}
                                                        <div class="col-12 col-sm-12 col-md-12">
                                                          <div class="card" style="width: 100%;">
                                                              <div class="card-header" style="background-color: #fafafa;">
                                                                <label for="">Descrição Audiovisual</label>
                                                                
                                                              </div>
                                                                
                                                              <div class="card-body">
                                                               <div class="row">
                                                                {% if entregavel.descricao_audio_visual %}
                                                                {{entregavel.descricao_audio_visual|safe}}
                                                                {% else %}
                                                                Sem descrições
                                                                {% endif %}
                                                               </div>
                                                              </div>
                                                          </div>
                                                        </div>
                    
                                                       
                                                        {% endif %}
                    
                                                        {% if entregavel.observacao %}
                                                        <div class="col-12 col-sm-12 col-md-12">
                                                          <div class="card" style="width: 100%;">
                                                              <div class="card-header" style="background-color: #fafafa;">
                                                                <label for="">Observações Gerais</label>
                                                                
                                                              </div>
                                                                
                                                              <div class="card-body">
                                                               <div class="row">
                                                                {% if entregavel.observacao %}
                                                                {{entregavel.observacao|safe}}
                                                                {% else %}
                                                                Sem observações
                                                                {% endif %}
                                                               </div>
                                                              </div>
                                                          </div>
                                                        </div>
                    
                                                       
                                                        {% endif %}
                    
                                                        {% if entregavel.exemplo_arte %}
                                                        <div class="col-12 col-sm-12 col-md-12">
                                                          <div class="card" style="width: 100%;">
                                                              <div class="card-header" style="background-color: #fafafa;">
                                                                <label for="">Exemplos de Artes</label>
                                                                
                                                              </div>
                                                                
                                                              <div class="card-body">
                                                               <div class="row">
                                                                <div class="col-sm-2">
                                                                  
                                                                  <a href="{{entregavel.exemplo_arte}}" data-toggle="lightbox" data-title="Exemplo de Arte" data-gallery="gallery">
                                                                    <img src="{{entregavel.exemplo_arte}}" class="img-fluid mb-2" alt="white sample"/>
                                                                  </a>
                    
                                                                </div>
                                                               </div>
                    
                                                              </div>
                                                          </div>
                                                        </div>
                                                        {% endif %}
                                                        
                                                        {% if entregavel.tarefas_relacionadas and '3' in permissoes.permissao %}
                                                        <div class="col-12 col-sm-12 col-md-12">
                                                          <div class="card" style="width: 100%;">
                                                              <div class="card-header" style="background-color: #fafafa;">
                                                                <label for="">Tarefas Designadas</label>
                                                                
                                                              </div>
                                                                
                                                              <div class="card-body">
                                                               <div class="row">
                                                                <table style="margin-top: 10px;">
                                                                  <thead>
                                                                    <tr>
                                                                      <th>#</th>
                                                                      <th>Data da Solicitação</th>
                                                                      <th>Título</th>
                                                                      <th>Prazo de Entrega</th>
                                                                      <th>Data da Entrega</th>
                                                                      <th>Usuário Designado</th>
                                                                      <th>Prioridade</th>
                                                                      <th>Status</th>
                                                                     
                                              
                                                                      
                                                                    </tr>
                                                                  </thead>
                                                                  <tbody >
                                                          
                                                                
                                                                    {% for tarefa in entregavel.tarefas_relacionadas  %}
                                                                      <tr  onclick="modalTarefa('{{tarefa.id}}')">
                                                
                                                                       <td>#{{tarefa.id}}</td>
                                                                       <td>{{tarefa.data_tarefa|date:'d/m/Y'}}</td>
                                                                       <td>{{tarefa.titulo_tarefa}}</td>
                                                                       <td>{{tarefa.prazo_entrega|date:'d/m/Y'}}</td>
                                                                       <td>{% if tarefa.data_entrega %} {{tarefa.data_entrega|date:'d/m/Y'}} {%else%} Aguardando Entrega {% endif %}</td>
                                                                       <td>{{tarefa.usuario.first_name}}</td>
                                                                       <td>{% if tarefa.prioridade == 1 %}   <span class="badge bg-primary" style="padding: 5px; width: 100%;"> {{tarefa.get_prioridade_display}}</span> {% else %} <span class="badge bg-danger" style="padding: 5px; width: 100%;"> {{tarefa.get_prioridade_display}}</span>{% endif %}</td>
                                                                       
                                                                       <td>
                                                                        {% if tarefa.status == 0 %}
                                                                        <span class="badge bg-warning" style="padding: 5px; width: 100%;"> {{tarefa.get_status_display}}</span>

                                                                          {% elif tarefa.status == 1 %}
                                                                          <span class="badge bg-warning" style="padding: 5px; width: 100%;"> {{tarefa.get_status_display}}</span>
                                                                         
                                                                          {% elif tarefa.status == 2 %}
                                                                          <span class="badge bg-danger" style="padding: 5px; width: 100%;"> {{tarefa.get_status_display}}</span>

                                                                          {% elif tarefa.status == 3 %}
                                                                          <span onclick="editarEntregavel('{{entregavel.id}}')" class="badge bg-success" style="padding: 5px; width: 100%;"> {{tarefa.get_status_display}}</span>
                                                                        {% endif %}
                                                                       </td>
                    
                                                                 
                                                                      </tr>
                                                              
                                                                    {% endfor %}
                                                                  </tbody>
                                                                  
                                                                </table>
                                                               </div>
                                                              </div>
                                                          </div>
                                                        </div>
                                                        {% endif %}
                                                        {% if entregavel.motivo_revisao and entregavel.status != '4' %}
                                                        <div class="col-12 col-sm-12 col-md-12">
                                                          <div class="alert alert-danger alert-dismissible">
                            
                                                            <h5><i class="bi bi-arrow-repeat"></i> {% if entregavel.status == '6' %} Entregável Negado! {% else %} Entregável Devolvido!{% endif %}</h5>
                                                              {{entregavel.motivo_revisao|safe}}
                                                          </div>
                                                        </div>
                                                      {% endif %}
                                                      </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                    
                                 </div>
                                </div>
                            </div>
                          </div>

                         
                         </div>
                        </div>
                        
                                
            
                        </div>
                          
                  </div>
                 

              </div>
              <br>
    
              
              
              <br><br><br>
              <!-- /.input group -->
            </div>
            
        
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.card -->
        <!-- /.card-body -->
      </div>

    </div><!-- /.container-fluid -->
    
  </section>

<!-- Full screen modal -->
<div class="modal fade modal-fullscreen-xl" id="modal-fullscreen-xl" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog-full" role="document">
    <div class="modal-content-full">
      <div class="modal-header">
        <h5 class="modal-title">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body-full">
      teste
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="revisaoTask" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="TitleEdit">Solicitar Revisão de Tarefa</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
     
      <div class="modal-body">
        <div class="row">
        
      <input style="display: none;" type="text" value="" id="task_id"  class="form-control" name="task_id">


      <div class="col-12 col-sm-12 col-md-12">
        <div class="form-group">
        <label>Novo Prazo de Entrega:</label>

        <div class="input-group">
          
            <input type="date" id="novo_prazo_entrega"   class="form-control" name="novo_prazo_entrega">
        </div>
        <!-- /.input group -->
        </div>
      </div>
      
     

      <div class="col-12 col-sm-12 col-md-12">

          <div class="card card-dark card-outline">
            <div class="card-header">
              <h3 class="card-title">Descrição da Tarefa:</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">
            
              <div class="form-group">
                  <textarea  id="nova_descricao_tarefa" name="nova_descricao_tarefa" class="form-control summernote" style="height: 300px"></textarea>
              </div>
            
            </div>
            <!-- /.card-body -->
          
          </div>

      </div>

      </div>
    </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
        <button type="button"n onclick="revisionarTask()" class="btn btn-primary">Solicitar Revisão</button>
      </div>
 
    </div>
  </div>
</div>

<div class="modal fade" id="exampleModalCenter" tabindex="-1" aria-labelledby="exampleModalCenterTitle" style="display: none;" aria-hidden="true">
  <form id="formTarefas" method="POST"  enctype="multipart/form-data">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Modal title</h5>
        <button type="button" class="close" onclick="fecharModal('exampleModalCenter')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>This is a vertically centered modal.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="fecharModal('exampleModalCenter')">Fechar</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
  </form>
</div>

<div class="modal fade" id="modalEditTask" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="TitleEdit">Designar Usuário</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
     
      <div class="modal-body">
        <div class="row">
        <div class="col-12 col-sm-12 col-md-12">
        <div class="form-group">
        <label>Título da Tarefa:</label>
      
        <div class="input-group">
          
            <input type="text" value="" id="tituloTarefa_edit"  class="form-control" name="tituloTarefa">
            <input style="display: none;" type="text" value="" id="id_entregavel"  class="form-control" name="id_entregavel">
            <input style="display: none;" type="text" value="" id="num_tbl"  class="form-control" name="num_tbl">
        </div>
        <!-- /.input group -->
        </div>
      </div>


      <input style="display: none;" type="text" value="" id="entregavel_id"  class="form-control" name="entregavel_id">

      <div class="col-12 col-sm-12 col-md-4">
        <div class="form-group">
        <label>Designar Usuário:</label>
      
        <div class="input-group">

            <select style="width: 100%;"  class="form-control select2" id="designar_usuario_edit" name="designar_usuario_edit" required>
                {% for usuario in usuarios %}
                 <option value="{{usuario.id}}">{{usuario.first_name}}</option>
                {% endfor %}
              </select>
        </div>
        <!-- /.input group -->
        </div>
      </div>

      <div class="col-12 col-sm-12 col-md-4">
        <div class="form-group">
        <label>Prioridade:</label>
      
        <div class="input-group">
          
            <select  class="form-control" id="prioridade_edit" name="prioridade_edit">
                <option selected value="1">Normal</option>
                <option value="2">Prioridade</option>
              </select>
        </div>
        <!-- /.input group -->
        </div>
      </div>

      <div class="col-12 col-sm-12 col-md-4">
        <div class="form-group">
        <label>Prazo para Entrega:</label>

        <div class="input-group">
          
            <input type="date" id="prazo_entrega_edit"   class="form-control" name="prazo_entrega_edit">
        </div>
        <!-- /.input group -->
        </div>
      </div>
      
     

      <div class="col-12 col-sm-12 col-md-12">
        <div class="col-md-12">
          <div class="card card-dark card-outline">
            <div class="card-header">
              <h3 class="card-title">Descrição da Tarefa:</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">
            
              <div class="form-group">
                  <textarea  id="descricao_tarefa_edit" name="descricao_tarefa_edit" class="form-control summernote" style="height: 300px"></textarea>
              </div>
            
            </div>
            <!-- /.card-body -->
          
          </div>
          <!-- /.card -->
        </div>
      </div>

      </div>
    </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
        <button type="button"n onclick="designarUsuario()" class="btn btn-primary">Designar Usuário</button>
      </div>
 
    </div>
  </div>
</div>

<div class="modal fade" id="devolverComunicacao" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="TitleEdit">Devolver Entregável a Comunicação</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
     
      <div class="modal-body">
        <div class="row">
        
      <input style="display: none;" type="text" value="" id="d_entregavel_id"  class="form-control" name="d_entregavel_id">



      <div class="col-12 col-sm-12 col-md-12">

          <div class="card card-dark card-outline">
            <div class="card-header">
              <h3 class="card-title">Motivo da Devolução:</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">
            
              <div class="form-group">
                  <textarea  id="motivo_devolucao" name="motivo_devolucao" class="form-control summernote" style="height: 300px"></textarea>
              </div>
            
            </div>
            <!-- /.card-body -->
          
          </div>

      </div>

      </div>
    </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
        <button type="button"n onclick="devolverEntregavel()" class="btn btn-primary">Devolver</button>
      </div>
 
    </div>
  </div>
</div>

<div class="modal fade" id="motivoNegado" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="title_negative">Motivo da Negativa</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
     
      <div class="modal-body">
        <div class="row">
        
      <input style="display: none;" type="text" value="" id="entregavelId_negativa"  class="form-control" name="entregavelId_negativa">
      <input style="display: none;" type="text" value="" id="status_modal"  class="form-control" name="status_modal">

      <div class="col-12 col-sm-12 col-md-12">

          <div class="card card-dark card-outline">
            <div class="card-header">
              <h3 class="card-title" id="descricao_negative">Descreva sobre a negativa:</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">
            
              <div class="form-group">
                  <textarea  id="negativa_descricao" name="negativa_descricao" class="form-control summernote" style="height: 300px"></textarea>
              </div>
            
            </div>
            <!-- /.card-body -->
          
          </div>

      </div>

      </div>
    </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
        <button type="button"n onclick="negativarEntregavel()" class="btn btn-primary">Negar / Devolver</button>
      </div>
 
    </div>
  </div>
</div>

<div class="modal fade" id="editarEntregavelModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  
</div>

<div class="modal fade" id="editarSolicitacao" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  
</div>
<script>

function modalTarefa(tarefaId){

  url = '/ajax/view-task'
  var urlAtual = window.location.href
  $.ajax({
  url: url,
  data: {'tarefaId':tarefaId,'urlAtual':urlAtual},

  success: function(data) {

    $("#exampleModalCenter").html(data);
    $("#exampleModalCenter").modal('show')
  },
  error: function(xhr, status, error) {
    Swal.fire({
          icon: 'error',
          title: 'Ops!',
          text: 'Não foi possível obter resultados!'
        });  $('.summernote').summernote();
  }
  });
  }
    
function designarUsuario(){
    var titulo_tarefa = $("#tituloTarefa_edit").val()
    var usuario_designado = $("#designar_usuario_edit").val()
    console.log(usuario_designado)
    var prioridade = $("#prioridade_edit").val()
    var prazo_entrega = $("#prazo_entrega_edit").val()
    var descricao = $("#descricao_tarefa_edit").val()
    var entregavelId = $("#id_entregavel").val()
    var tbl = $("#num_tbl").val()

    var XCSRFToken = '{{ csrf_token }}';
    url = '/ajax/criar-tarefas'
    
    $.ajax({
        url: url,
        type: "post",
        data: {
            "titulo": titulo_tarefa,
            "usuario": usuario_designado,
            "prioridade": prioridade,
            "prazo_entrega": prazo_entrega,
            "descricao_tarefa": descricao,
            "idEntregavel": entregavelId
        },
        headers: { "X-CSRFToken": XCSRFToken },
        success: function (data) {
            Swal.fire({
                icon: 'success',
                title: 'Tarefa Criada!',
                text: "Tarefa criada e designada com sucesso!"
            }).then((result) => {
                // Ação a ser realizada após o botão "OK" ser clicado
                if (result.isConfirmed) {
                    // Redirecionar ou atualizar a página aqui
                    location.reload(); // Isso atualizará a página
                }
            });
        },
        error: function (data) {
            if (data.responseJSON && data.responseJSON.error_message) {
                Swal.fire({
                    icon: 'error',
                    title: 'Ops!',
                    text: data.responseJSON.error_message
                });
            }
        }
    });

}

function enviaAprovacao(idEntregavel,status){
    if (status ==  4){
      Swal.fire({
      title: 'Tem certeza?',
      text: 'Ao clicar em sim confirmo que a entrega foi realizada corretamente',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#d33',
      cancelButtonColor: '#3085d6',
      confirmButtonText: 'Sim',
      cancelButtonText: 'Não'
    }).then((result) => {
      if (result.isConfirmed) {

        var XCSRFToken = '{{ csrf_token }}'
        const url = "/ajax/ajax-confirmar-entrega";
        $.ajax({
            
            url: url,
            type:"post",
            data: { 'idEntregavel':idEntregavel,'statusEntregavel':status},
            headers: { "X-CSRFToken":  XCSRFToken },
            success: function (data) {
                Swal.fire({
                    icon: 'success',
                    title: 'Entrega Realizada!',
                    text: "A entrega foi marcada como realizada!"
                }).then((result) => {
                    // Ação a ser realizada após o botão "OK" ser clicado
                    if (result.isConfirmed) {
                        // Redirecionar ou atualizar a página aqui
                        location.reload(); // Isso atualizará a página
                    }
                });
            },
            error: function (data) {
                if (data.responseJSON && data.responseJSON.error_message) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Ops!',
                        text: data.responseJSON.error_message
                    });
                }
            }
        });
      }
    });
    }else{
      Swal.fire({
      title: 'Tem certeza?',
      text: 'Ao clicar enviará o entregável para o solicitante aprovar!',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#d33',
      cancelButtonColor: '#3085d6',
      confirmButtonText: 'Sim',
      cancelButtonText: 'Não'
    }).then((result) => {
      if (result.isConfirmed) {

        var XCSRFToken = '{{ csrf_token }}'
        const url = "/ajax/ajax-confirmar-entrega";
        $.ajax({
            
            url: url,
            type:"post",
            data: { 'idEntregavel':idEntregavel,'statusEntregavel':status},
            headers: { "X-CSRFToken":  XCSRFToken },
            success: function (data) {
                Swal.fire({
                    icon: 'success',
                    title: 'Entrega Realizada!',
                    text: "Entregável enviado para aprovação do solicitante!"
                }).then((result) => {
                    // Ação a ser realizada após o botão "OK" ser clicado
                    if (result.isConfirmed) {
                        // Redirecionar ou atualizar a página aqui
                        location.reload(); // Isso atualizará a página
                    }
                });
            },
            error: function (data) {
                if (data.responseJSON && data.responseJSON.error_message) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Ops!',
                        text: data.responseJSON.error_message
                    });
                }
            }
        });
      }
    });
  }
}
    
function modalTarefas(entregavelId,counter_loop){
        document.getElementById('id_entregavel').value = entregavelId
        document.getElementById('num_tbl').value = counter_loop

        url = '/ajax/get-task-ocupad'

        

        $("#modalEditTask").modal("show")
    }

function revisaoTask(idtask){
  document.getElementById("task_id").value = idtask
  $("#revisaoTask").modal('show')
}

function fecharModal(id){
  $("#"+id).modal('hide')
}

function revisionarTask(){
  prazo_entrega = $("#novo_prazo_entrega").val()
  nova_descricao_tarefa = $("#nova_descricao_tarefa").val()
  idTask = $("#task_id").val()

  Swal.fire({
      title: 'Tem certeza?',
      text: 'Ao confirmar enviará a tarefa para revisão ao usuário já designado',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#d33',
      cancelButtonColor: '#3085d6',
      confirmButtonText: 'Sim',
      cancelButtonText: 'Não'
    }).then((result) => {
      if (result.isConfirmed) {

        var XCSRFToken = '{{ csrf_token }}'
        const url = "/ajax/ajax-revisao-task";
        $.ajax({
            
            url: url,
            type:"post",
            data: { 'idTask':idTask,'novo_prazo_entrega':prazo_entrega,"nova_descricao_tarefa":nova_descricao_tarefa},
            headers: { "X-CSRFToken":  XCSRFToken },
            success: function (data) {
                Swal.fire({
                    icon: 'success',
                    title: 'Tarefa em Revisão!',
                    text: "A terefa foi enviada para revisão!"
                }).then((result) => {
                    // Ação a ser realizada após o botão "OK" ser clicado
                    if (result.isConfirmed) {
                        // Redirecionar ou atualizar a página aqui
                        location.reload(); // Isso atualizará a página
                    }
                });
            },
            error: function (data) {
                if (data.responseJSON && data.responseJSON.error_message) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Ops!',
                        text: data.responseJSON.error_message
                    });
                }
            }
        });
      }
    });
}

function negarEntregavel(entregavelId,motivo){
  
  var titulo = document.querySelector(".modal-title#title_negative");
  var descricao = document.querySelector(".card-title#descricao_negative");


  if (motivo == 6){
    console.log('entrou 6')
    titulo.innerText = "Motivo da Negativa"
    descricao.innerText = "Descreva o motivo da negativa:"
    document.getElementById("status_modal").value = 1
  }else{
    console.log('entrou 5')
    titulo.innerText = "Motivo da Devolutiva"
    descricao.innerText = "Descreva o motivo da devolutiva:"
    document.getElementById("status_modal").value = 2
  }
  document.getElementById("entregavelId_negativa").value = entregavelId
 
  $("#motivoNegado").modal('show')
}

function negativarEntregavel(motivo){
  idEntregavel = $("#entregavelId_negativa").val()
  motivo = $("#negativa_descricao").val()
  tipo = $("#status_modal").val()
    if (tipo ==  '1'){
      Swal.fire({
        title: 'Tem certeza?',
        text: 'Ao negar o entregável ele não poderá mais ser reaberto',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Sim',
        cancelButtonText: 'Não'
      }).then((result) => {
        if (result.isConfirmed) {

          var XCSRFToken = '{{ csrf_token }}'
          const url = "/ajax/negar-entregavel";
          $.ajax({
              
              url: url,
              type:"post",
              data: { 'idEntregavel':idEntregavel,'negativa_descricao':motivo,'tipo':tipo},
              headers: { "X-CSRFToken":  XCSRFToken },
              success: function (data) {
                  Swal.fire({
                      icon: 'success',
                      title: 'Entregável Negado!',
                      text: "Entregável negado com sucesso!"
                  }).then((result) => {
                      // Ação a ser realizada após o botão "OK" ser clicado
                      if (result.isConfirmed) {
                          // Redirecionar ou atualizar a página aqui
                          location.reload(); // Isso atualizará a página
                      }
                  });
              },
              error: function (data) {
                  if (data.responseJSON && data.responseJSON.error_message) {
                      Swal.fire({
                          icon: 'error',
                          title: 'Ops!',
                          text: data.responseJSON.error_message
                      });
                  }
              }
          });
        }
      });
  }else{
    Swal.fire({
        title: 'Tem certeza?',
        text: 'Ao devolver o entregável o solicitante poderá editar os dados!',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Sim',
        cancelButtonText: 'Não'
      }).then((result) => {
        if (result.isConfirmed) {

          var XCSRFToken = '{{ csrf_token }}'
          const url = "/ajax/negar-entregavel";
          $.ajax({
              
              url: url,
              type:"post",
              data: { 'idEntregavel':idEntregavel,'negativa_descricao':motivo,'tipo':tipo},
              headers: { "X-CSRFToken":  XCSRFToken },
              success: function (data) {
                  Swal.fire({
                      icon: 'success',
                      title: 'Entregável Negado!',
                      text: "Entregável negado com sucesso!"
                  }).then((result) => {
                      // Ação a ser realizada após o botão "OK" ser clicado
                      if (result.isConfirmed) {
                          // Redirecionar ou atualizar a página aqui
                          location.reload(); // Isso atualizará a página
                      }
                  });
              },
              error: function (data) {
                  if (data.responseJSON && data.responseJSON.error_message) {
                      Swal.fire({
                          icon: 'error',
                          title: 'Ops!',
                          text: data.responseJSON.error_message
                      });
                  }
              }
          });
        }
      });
  }
 
}

function devolveComunicacao(idEntregavel){
  document.getElementById("d_entregavel_id").value = idEntregavel
  $("#devolverComunicacao").modal('show')
}

function devolverEntregavel(){
  motivo_devolucao = $("#motivo_devolucao").val()
  entregavelId = $("#d_entregavel_id").val()

  Swal.fire({
      title: 'Tem certeza?',
      text: 'Ao confirmar você irá devolver o entregável a comunicação',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#d33',
      cancelButtonColor: '#3085d6',
      confirmButtonText: 'Sim',
      cancelButtonText: 'Não'
    }).then((result) => {
      if (result.isConfirmed) {

        var XCSRFToken = '{{ csrf_token }}'
        const url = "/ajax/ajax-devolver-entregavel";
        $.ajax({
            
            url: url,
            type:"post",
            data: { 'entregavelId':entregavelId,'motivo_devolucao':motivo_devolucao},
            headers: { "X-CSRFToken":  XCSRFToken },
            success: function (data) {
                Swal.fire({
                    icon: 'success',
                    title: 'Entregável Devolvido!',
                    text: "O entregável foi devolvido para correções"
                }).then((result) => {
                    // Ação a ser realizada após o botão "OK" ser clicado
                    if (result.isConfirmed) {
                        // Redirecionar ou atualizar a página aqui
                        location.reload(); // Isso atualizará a página
                    }
                });
            },
            error: function (data) {
                if (data.responseJSON && data.responseJSON.error_message) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Ops!',
                        text: data.responseJSON.error_message
                    });
                }
            }
        });
      }
    });
}

function editarEntregavelModal(entregavelId){
  url = '/ajax/alterar-entregavel'

  $.ajax({
  url: url,
  data: {'entregavelId':entregavelId},

  success: function(data) {

    $("#editarEntregavelModal").html(data);
    $("#editarEntregavelModal").modal('show')
  },
  error: function(xhr, status, error) {
    Swal.fire({
          icon: 'error',
          title: 'Ops!',
          text: 'Não foi possível obter resultados!'
        });
  }
  });
}

function editarSolicitacaoModal(solicitacaoid){
  url = '/ajax/alterar-solicitacao'

  $.ajax({
  url: url,
  data: {'solicitacaoId':solicitacaoid},

  success: function(data) {

    $("#editarSolicitacao").html(data);
    $("#editarSolicitacao").modal('show')
  },
  error: function(xhr, status, error) {
    Swal.fire({
          icon: 'error',
          title: 'Ops!',
          text: 'Não foi possível obter resultados!'
        });
  }
  });
}
</script>

  <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>

  {% endblock %}
